"use strict";function _defineProperty(t,o,n){return o in t?Object.defineProperty(t,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[o]=n,t}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=t:t(jQuery)}(function(t){var o=function(o,n){this.$elem=t(o),this.$mask=t("<div class='popup-layer'></div>"),this.$content=t("<div class='popup-layer-content'></div>"),this.$blurAreas=t(n.blurAreas||"body > *"),this.defaults={content:"",target:"body",to:"top",screenRatio:.3,heightOrWidth:300,blur:!1,speed:200,color:"#000",backgroundColor:"#fff",contentToggle:!1,closeBtn:null,openCallback:null,closeCallback:null},this.options=t.extend({},this.defaults,n)};o.prototype={init:function(){this.attachElems(),this.updateContent(),this.bindEvents()},updateContent:function(){this.$content.html(this.options.content);var o=this;t(function(){o.$content.children().show()});var n={top:0,right:0,bottom:0,left:0};n[this.options.to]="100%",this.$content.css({top:n.top,right:n.right,bottom:n.bottom,left:n.left,color:this.options.color,"background-color":this.options.backgroundColor,transition:"all "+this.options.speed/1e3+"s"})},attachElems:function(){this.$content.appendTo(this.$mask),this.$mask.appendTo(t(this.options.target))},open:function(){if(this.$mask.fadeIn(this.options.speed),0!=this.options.screenRatio)this.$content.css(_defineProperty({},this.options.to,100*(1-this.options.screenRatio)+"%"));else{var o=0;o="left"==this.options.to||"right"==this.options.to?this.options.heightOrWidth/t(window).outerWidth():this.options.heightOrWidth/t(window).outerHeight(),this.$content.css(_defineProperty({},this.options.to,100*(1-o)+"%"))}this.options.blur&&this.$blurAreas.addClass("popup-layer-blur"),this.options.openCallback&&this.options.openCallback()},close:function(){this.$mask.fadeOut(this.options.speed),this.$content.css(_defineProperty({},this.options.to,"100%")),this.options.blur&&this.$blurAreas.removeClass("popup-layer-blur"),this.options.closeCallback&&this.options.closeCallback()},bindEvents:function(){var o=this;this.$elem.click(function(){o.open()}),this.options.contentToggle||this.$content.click(function(t){t.stopPropagation()}),this.$mask.click(function(){o.close()}),this.options.closeBtn&&t(this.options.closeBtn).click(function(){o.close()})}},t.fn.PopupLayer=function(t){return this.each(function(){new o(this,t).init()})}});